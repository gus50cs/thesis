<link rel="stylesheet" href="static/Accountpage/account.css">
    <header>
      <a class="tab-button" onclick="goToHome()">HOME</a>
      <a class="logout-button" href="/logout">LOGOUT</a>
  </header>
    <div class="mainDiv">
        <div class="cardStyle">
          <form action="" method="post" name="signupForm" id="signupForm">
            
            <img src="" id="signupLogo"/>
            <h2 class="formTitle">
                Account: Port1
            </h2>

            <h2 class="formTitle">
              Change password
            </h2>
            
          <div class="inputDiv">
            <label class="inputLabel" for="password">New Password</label>
            <input type="password" id="password" name="password" required>
          </div>
            
          <div class="inputDiv">
            <label class="inputLabel" for="confirmPassword">Confirm Password</label>
            <input type="password" id="confirmPassword" name="confirmPassword">
          </div>
          
          <div class="buttonWrapper">
            <button type="submit" id="submitButton" onclick="validateSignupForm()" class="submitButton pure-button pure-button-primary">
              <span>Continue</span>
              <span id="loader"></span>
            </button>
          </div>
            
        </form>
        </div>
      </div>
    
    
      <script>
    
        var password = document.getElementById("password")
          , confirm_password = document.getElementById("confirmPassword");
        
        enableSubmitButton();
        
        function validatePassword() {
          if(password.value != confirm_password.value) {
            confirm_password.setCustomValidity("Passwords Don't Match");
            return false;
          } else {
            confirm_password.setCustomValidity('');
            return true;
          }
        }
        
        password.onchange = validatePassword;
        confirm_password.onkeyup = validatePassword;
        
        function enableSubmitButton() {
          document.getElementById('submitButton').disabled = false;
          document.getElementById('loader').style.display = 'none';
        }
        
        function disableSubmitButton() {
          document.getElementById('submitButton').disabled = true;
          document.getElementById('loader').style.display = 'unset';
        }
        
        function validateSignupForm() {
          var form = document.getElementById('signupForm');
          
          for(var i=0; i < form.elements.length; i++){
              if(form.elements[i].value === '' && form.elements[i].hasAttribute('required')){
                console.log('There are some required fields!');
                return false;
              }
            }
          
          if (!validatePassword()) {
            return false;
          }
          
          onSignup();
        }
        
        function onSignup() {
  var xhttp = new XMLHttpRequest();
  xhttp.onreadystatechange = function() {
    disableSubmitButton();
    
    if (this.readyState == 4) {
      if (this.status == 200) {
        enableSubmitButton();
      } else {
        console.log('AJAX call failed!');
        setTimeout(function(){
          enableSubmitButton();
        }, 1000);
      }
    }
  };
  
  var form = document.getElementById('signupForm');
  var password = document.getElementById('password').value;
  var username = "Port1"; 
  
  var params = "password=" + encodeURIComponent(password) + "&username=" + encodeURIComponent(username);
  
  xhttp.open("POST", "/account", true);
  xhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
  xhttp.send(params);
  resetFormFields();
}
        </script>
        <script>
          function resetFormFields() {
          document.getElementById("password").value = "";
        document.getElementById("confirmPassword").value = "";
        }
          function goToHome() {
            window.location.href = "/";
          }       
        </script>